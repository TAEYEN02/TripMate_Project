files:
  "/etc/nginx/conf.d/myapp.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      server {
          listen 80;
          root /var/app/current;

          location / {
              index index.html;
              try_files $uri $uri/ /index.html;
          }

          location ~* \.(js|css|html)$ {
              add_header Cache-Control "no-cache, no-store, must-revalidate";
          }
      }

option_settings:
  aws:elasticbeanstalk:application:environment:
    PORT: 8081

container_commands:
  01_reload_nginx:
    command: "service nginx reload"